"use strict";(self.webpackChunkakawor_front=self.webpackChunkakawor_front||[]).push([[525],{6018:(Q,M,s)=>{s.d(M,{f:()=>T});var n=s(4650),C=s(2319),t=s(6895),h=s(9299);const _=function(d){return{active:d}};function v(d,m){if(1&d&&(n.TgZ(0,"li")(1,"a",10),n._UZ(2,"i",11),n.TgZ(3,"span",3),n._uU(4,"G\xe9rer mon panier"),n.qZA()()()),2&d){const p=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(1,_,"manage-panier"===p.activePath))}}function O(d,m){if(1&d&&(n.TgZ(0,"li")(1,"a",12),n._UZ(2,"i",13),n.TgZ(3,"span",3),n._uU(4,"G\xe9rer ma liste de souhaits"),n.qZA()()()),2&d){const p=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(1,_,"manage-list-de-souhaits"===p.activePath))}}function Z(d,m){1&d&&(n.TgZ(0,"label",0),n._uU(1,"Mes annonces"),n.qZA())}function b(d,m){if(1&d&&(n.TgZ(0,"ul")(1,"li")(2,"a",14),n._UZ(3,"i",15),n.TgZ(4,"span",3),n._uU(5,"Publier une annonce"),n.qZA()()()()),2&d){const p=n.oxw();n.xp6(2),n.Q6J("ngClass",n.VKq(1,_,"publish-announce"===p.activePath))}}function l(d,m){if(1&d&&(n.TgZ(0,"li")(1,"a",16),n._UZ(2,"i",17),n.TgZ(3,"span",3),n._uU(4,"Mes adresses"),n.qZA()()()),2&d){const p=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(1,_,"manage-deliveries-address"===p.activePath))}}function y(d,m){1&d&&(n.TgZ(0,"label",0),n._uU(1,"Ma boutique"),n.qZA())}function x(d,m){if(1&d&&(n.TgZ(0,"ul")(1,"li")(2,"a",18),n._UZ(3,"i",19),n.TgZ(4,"span",3),n._uU(5,"G\xe9rer ma boutique"),n.qZA()()()()),2&d){const p=n.oxw();n.xp6(2),n.Q6J("ngClass",n.VKq(1,_,"manage-shop"===p.activePath))}}let T=(()=>{class d{constructor(p){this.securityService=p,this.securityService.getAuthenticatedUser().then(u=>{this.role=u.userRole,this.user=u})}logout(){this.securityService.logout()}}return d.\u0275fac=function(p){return new(p||d)(n.Y36(C.I))},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-manage-aside"]],inputs:{activePath:"activePath"},decls:32,vars:16,consts:[[1,"form-label"],["routerLink","/parametres/compte-et-profile",1,"w-100","text-start",3,"ngClass"],[1,"fa-solid","fa-user"],[1,"text-ellip"],[4,"ngIf"],["routerLink","/commandes",1,"w-100","text-start",3,"ngClass"],[1,"fa-solid","fa-box"],["class","form-label",4,"ngIf"],["routerLink","/livraisons",1,"w-100","text-ellip","text-start",3,"ngClass"],[1,"fa-solid","fa-truck"],["routerLink","/mon-panier",1,"w-100","text-ellip","text-start",3,"ngClass"],[1,"fa-solid","fa-cart-shopping"],["routerLink","/ma-liste-de-souhaits",1,"w-100","text-ellip","text-start",3,"ngClass"],[1,"fa-solid","fa-heart"],["routerLink","/produits/nouvelle-annonce",1,"w-100","text-ellip","text-start",3,"ngClass"],[1,"fa-solid","fa-bullhorn"],["routerLink","/livraisons/mes-adresses",1,"w-100","text-ellip","text-start",3,"ngClass"],[1,"fa-solid","fa-map-location-dot"],["routerLink","/parametres/ma-boutique",1,"w-100","text-ellip","text-start",3,"ngClass"],[1,"fa-solid","fa-gears"]],template:function(p,u){1&p&&(n.TgZ(0,"aside")(1,"label",0),n._uU(2,"Mon compte"),n.qZA(),n.TgZ(3,"ul")(4,"li")(5,"a",1),n._UZ(6,"i",2),n.TgZ(7,"span",3),n._uU(8,"Compte & profile"),n.qZA()()(),n.YNc(9,v,5,3,"li",4),n.YNc(10,O,5,3,"li",4),n.qZA(),n.TgZ(11,"label",0),n._uU(12,"Mes commandes"),n.qZA(),n.TgZ(13,"ul")(14,"li")(15,"a",5),n._UZ(16,"i",6),n.TgZ(17,"span",3),n._uU(18,"G\xe9rer mes commandes"),n.qZA()()()(),n.YNc(19,Z,2,0,"label",7),n.YNc(20,b,6,3,"ul",4),n.TgZ(21,"label",0),n._uU(22,"Mes livraisons"),n.qZA(),n.TgZ(23,"ul")(24,"li")(25,"a",8),n._UZ(26,"i",9),n.TgZ(27,"span",3),n._uU(28,"G\xe9rer mes livraisons"),n.qZA()()(),n.YNc(29,l,5,3,"li",4),n.qZA(),n.YNc(30,y,2,0,"label",7),n.YNc(31,x,6,3,"ul",4),n.qZA()),2&p&&(n.xp6(5),n.Q6J("ngClass",n.VKq(10,_,"profile"===u.activePath)),n.xp6(4),n.Q6J("ngIf",u.role&&"ROLE_CLIENT"===u.role),n.xp6(1),n.Q6J("ngIf",u.role&&"ROLE_CLIENT"===u.role),n.xp6(5),n.Q6J("ngClass",n.VKq(12,_,"manage-commands"===u.activePath)),n.xp6(4),n.Q6J("ngIf",u.role&&"ROLE_VENDEUR"===u.role),n.xp6(1),n.Q6J("ngIf",u.role&&"ROLE_VENDEUR"===u.role),n.xp6(5),n.Q6J("ngClass",n.VKq(14,_,"manage-deliveries"===u.activePath)),n.xp6(4),n.Q6J("ngIf",u.role&&"ROLE_CLIENT"===u.role),n.xp6(1),n.Q6J("ngIf",u.role&&"ROLE_VENDEUR"===u.role),n.xp6(1),n.Q6J("ngIf",u.role&&"ROLE_VENDEUR"===u.role))},dependencies:[t.mk,t.O5,h.rH],styles:["[_nghost-%COMP%]   aside[_ngcontent-%COMP%]{border-right:1px solid var(--gray-500);padding-right:25px}[_nghost-%COMP%]   aside[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:var(--gray-600)}[_nghost-%COMP%]   aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-bottom:30px!important}[_nghost-%COMP%]   aside[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;border-radius:4px;text-decoration:none;color:var(--black);border:none;padding:15px;margin-bottom:15px;background:var(--gray-500);font-weight:700;font-size:14px;display:flex;align-items:center;justify-content:flex-start;transition:all ease-in-out .15s}[_nghost-%COMP%]   aside[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}[_nghost-%COMP%]   aside[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], [_nghost-%COMP%]   aside[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--green-400);color:var(--white)}[_nghost-%COMP%]   aside[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--green-300)}"]}),d})()},7525:(Q,M,s)=>{s.r(M),s.d(M,{ProduitsModule:()=>ut});var n=s(6895),C=s(9299),t=s(4650),h=s(6298),_=s(8773),v=s(4859),O=s(266),Z=s(3683),b=s(4850),l=s(4006),y=s(7684),x=s(8971);const T=function(i){return{active:i}};function d(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"li",30)(1,"a",31),t.NdJ("click",function(){const c=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.changeCategory(c))}),t._UZ(2,"i"),t.TgZ(3,"span"),t._uU(4),t.qZA()()()}if(2&i){const e=a.$implicit,o=t.oxw();t.Q6J("ngClass",t.VKq(7,T,o.activeCategory===e)),t.xp6(1),t.s9C("routerLink","/produits/"+e.categorySlug),t.s9C("matTooltip",e.categoryLibelle),t.xp6(1),t.Tol(e.categoryIconClass),t.xp6(2),t.Oqu(e.categoryLibelle)}}function m(i,a){1&i&&(t.TgZ(0,"div",34),t._UZ(1,"app-product-card-loader"),t.qZA())}function p(i,a){if(1&i&&(t.TgZ(0,"div",32),t.YNc(1,m,2,0,"div",33),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.loaderCards)}}function u(i,a){1&i&&(t.TgZ(0,"div",35),t._UZ(1,"img",36),t.qZA())}function F(i,a){if(1&i&&(t.TgZ(0,"div")(1,"div",34),t._UZ(2,"app-product-card",37),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.Q6J("product",e)}}let q=(()=>{class i{constructor(e,o,r){this.produitsService=e,this.categoriesService=o,this.router=r,this.loaderCards=["","","","","","","","","","","","","","","",""],this.productCategories=[],this.priceRangeMin=0,this.priceRangeMax=0,this.selectedPriceRangeMax=0,this.selectedPriceRangeMin=0,this.isProductsLoaded=!1}ngOnInit(){const o=window.location.href.split("/")[4];o?this.produitsService.getProductsByCategoriesSlug(o).then(r=>{"category not found"===r.message&&this.router.navigate(["/produits"]),this.populateProducts(r)}):this.produitsService.getProducts().then(r=>{this.populateProducts(r)}),this.categoriesService.getCategoriesProducts().then(r=>{this.productCategories=r,o&&r.forEach(c=>{o===c.categorySlug&&(this.activeCategory=c)})})}populateProducts(e){this.products=e,this.isProductsLoaded=!this.isProductsLoaded,this.selectedPriceRangeMax=this.priceRangeMax}filterProducts(){document.querySelector("#top-filter")}changeCategory(e){this.activeCategory===e&&this.router.navigate(["/produits"]),this.isProductsLoaded=!1,e.categorySlug&&this.produitsService.getProductsByCategoriesSlug(e.categorySlug).then(o=>{this.activeCategory=e,this.products=o,this.isProductsLoaded=!0})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.o),t.Y36(_.G),t.Y36(C.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-all-produits"]],decls:40,vars:5,consts:[[1,"all-products-section"],[1,"container"],[1,"main"],[1,"row"],[1,"col","col-2","d-none","d-xl-block"],[1,"container","filter","h-100"],[2,"position","sticky","top","0","padding-bottom","30px"],[1,"text-ellip","pt-3","fw-bold"],[1,"title-divider",2,"margin-top","-12px"],["class","active",3,"ngClass",4,"ngFor","ngForOf"],[1,"col","col-12","col-xl-10"],[1,"container","all-products"],[1,"mb-3"],[1,"d-flex","align-items-center","justify-content-between","w-100"],[1,"display-types","d-flex","align-items-center"],["mat-icon-button","",1,"active"],[1,"fa-solid","fa-grip-vertical"],["mat-icon-button","",1,"disabled"],[1,"fa-solid","fa-list"],[1,"d-flex","align-items-center"],["id","top-filter",1,"form-select","form-select-sm",3,"change"],["value","0"],["selected","","value","1"],["value","2"],["value","3"],["value","4"],["class","row row-cols-2 row-cols-xl-4 g-3",4,"ngIf"],["matTooltip","Pas d'annonces en ligne !","class","empty-result d-flex flex-column align-items-center",4,"ngIf"],[1,"row","row-cols-2","row-cols-xl-4","g-3","pb-5",3,"hidden"],[4,"ngFor","ngForOf"],[1,"active",3,"ngClass"],[1,"text-ellip",3,"routerLink","matTooltip","click"],[1,"row","row-cols-2","row-cols-xl-4","g-3"],["class","col",4,"ngFor","ngForOf"],[1,"col"],["matTooltip","Pas d'annonces en ligne !",1,"empty-result","d-flex","flex-column","align-items-center"],["src","assets/images/empty.svg","alt","pas de resultats",1,"mt-3","mb-5"],[3,"product"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"aside",5)(6,"div",6)(7,"h4",7),t._uU(8,"Cat\xe9gories"),t.qZA(),t._UZ(9,"div",8),t.TgZ(10,"ul"),t.YNc(11,d,5,9,"li",9),t.qZA()()()(),t.TgZ(12,"div",10)(13,"div",11)(14,"mat-toolbar",12)(15,"div",13)(16,"div",14)(17,"button",15),t._UZ(18,"i",16),t.qZA(),t.TgZ(19,"button",17),t._UZ(20,"i",18),t.qZA()(),t.TgZ(21,"div",19)(22,"p"),t._uU(23,"Trier par:"),t.qZA(),t.TgZ(24,"select",20),t.NdJ("change",function(){return o.filterProducts()}),t.TgZ(25,"option",21),t._uU(26,"S\xe9lectionnez"),t.qZA(),t.TgZ(27,"option",22),t._uU(28,"Nom de A \xe0 Z"),t.qZA(),t.TgZ(29,"option",23),t._uU(30,"Nom de Z \xe0 A"),t.qZA(),t.TgZ(31,"option",24),t._uU(32,"Prix croissant"),t.qZA(),t.TgZ(33,"option",25),t._uU(34,"Prix d\xe9croissant"),t.qZA()()()()(),t.YNc(35,p,2,1,"div",26),t.YNc(36,u,2,0,"div",27),t.TgZ(37,"div",28),t.YNc(38,F,3,1,"div",29),t.qZA()()()()(),t._UZ(39,"mat-divider"),t.qZA()()),2&e&&(t.xp6(11),t.Q6J("ngForOf",o.productCategories),t.xp6(24),t.Q6J("ngIf",!o.isProductsLoaded),t.xp6(1),t.Q6J("ngIf",!o.products||0===o.products.length),t.xp6(1),t.Q6J("hidden",!o.isProductsLoaded),t.xp6(1),t.Q6J("ngForOf",o.products))},dependencies:[n.mk,n.sg,n.O5,v.RK,O.gM,Z.Ye,b.d,l.YN,l.Kr,y.C,x.Y,C.rH],styles:["[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]{background-color:var(--gray-400)}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Jost,sans-serif}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .empty-result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:400px;width:90%}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{background-color:var(--white);border-radius:5px;border:var(--gray-500) 1px solid}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .display-types[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:var(--gray-400);scale:.8;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .display-types[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:var(--green-400)}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .display-types[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:var(--gray-600);margin-top:10px}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-left:10px}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-slider__right-input[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .all-products[_ngcontent-%COMP%]{padding:20px 0}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{padding-bottom:30px;background-color:var(--gray-500)}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;width:100%;background:var(--gray-400);border-radius:5px;padding:10px;margin-bottom:8px;transition:all .3s ease-in-out}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;text-decoration:none;color:var(--gray-600)}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:var(--green-400)}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--white)}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   .price-range[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:-12px;font-size:12px;color:var(--gray-600)}[_nghost-%COMP%]   .all-products-section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   .price-range[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;color:var(--gray-600);font-style:italic}"]}),i})();var f=s(1261),L=s(9891),w=s(2319),I=s(3546),E=s(9549),Y=s(4144),D=s(7392),R=s(3238),V=s(4385),J=s(6018);function K(i,a){1&i&&(t.TgZ(0,"h1"),t._uU(1,"Modification d'une annonce"),t.qZA())}function z(i,a){1&i&&(t.TgZ(0,"h1"),t._uU(1,"Cr\xe9ation d'une nouvelle annonce"),t.qZA())}function $(i,a){if(1&i&&(t.TgZ(0,"mat-option",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.categoryLibelle," ")}}function B(i,a){if(1&i&&(t.TgZ(0,"mat-option",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.categoryLibelle," ")}}function j(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",58)(1,"button",59),t.NdJ("click",function(){const c=t.CHM(e).index,g=t.oxw();return t.KtG(g.removeAttribut(c))}),t._uU(2," Retirer "),t.qZA(),t.TgZ(3,"input",60),t.NdJ("ngModelChange",function(r){const g=t.CHM(e).$implicit;return t.KtG(g.key=r)}),t.qZA(),t.TgZ(4,"input",61),t.NdJ("ngModelChange",function(r){const g=t.CHM(e).$implicit;return t.KtG(g.value=r)}),t.qZA()()}if(2&i){const e=a.$implicit;t.xp6(3),t.Q6J("ngModel",e.key),t.xp6(1),t.Q6J("ngModel",e.value)}}function G(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",62)(1,"label",63),t._UZ(2,"img",64),t.qZA(),t.TgZ(3,"input",65),t.NdJ("change",function(r){const g=t.CHM(e).index,P=t.oxw();return t.KtG(P.displayAndUploadFile(r,g))}),t.qZA(),t.TgZ(4,"button",36)(5,"mat-icon"),t._uU(6,"close"),t.qZA()()()}if(2&i){const e=a.index;t.xp6(1),t.s9C("for","other"+e),t.xp6(1),t.s9C("id","displayOther"+e),t.xp6(1),t.s9C("id","other"+e)}}const A=function(i){return{"selected-visibility":i}},k=function(i){return{disabled:i}};let H=(()=>{class i{constructor(e,o,r,c,g){this.produitService=e,this.toastService=o,this.securityService=r,this.categoriesService=c,this.route=g,this.isOnDraftMode=!1,this.selectedVisibility=1,this.urlToSendImages=`${f.N.BACKEND_API_URL}/image/upload`,this.urlToGetImages=`${f.N.BACKEND_IMAGES_FOLDER}`,this.attributsProduct=[{key:"",value:""}],this.stepPercent=25,this.titleControl=new l.NI("",[l.kI.required,l.kI.minLength(5)]),this.priceControl=new l.NI("",[l.kI.required,l.kI.min(2)]),this.weightControl=new l.NI("",[l.kI.required,l.kI.min(.1)]),this.stockControl=new l.NI("",[l.kI.required,l.kI.min(1)]),this.descriptionControl=new l.NI("",[l.kI.required,l.kI.minLength(10)]),this.mainCategoryControl=new l.NI(null,[l.kI.required]),this.subCategoryControl=new l.NI(null),this.subCategories=[],this.mainProductsCategories=[],this.productObject={productTitle:"",productPrice:0,productDescription:"",productIsOutOfStock:!1},this.otherImages=["","","","","",""],this.categoriesService.getCategoriesProducts().then(P=>{this.mainProductsCategories=P}),this.mainCategoryControl.valueChanges.subscribe(P=>{this.categoriesService.getSubCategoriesProducts(P.id).then(S=>{S&&(this.subCategories=S)})}),this.securityService.getAuthenticatedUser().then(P=>{P.id&&(this.productOwnerId=P.id)})}ngOnInit(){this.route.queryParams.subscribe(e=>{e.edit_product&&this.produitService.getProductBySlug(e.edit_product).then(o=>{o.message||(this.productObject=o,this.isOnDraftMode=!0,this.hydrateFields(o),document.title="Modification d'une annonce | Akawor")})})}setVisibility(e){this.selectedVisibility=e}hydrateImages(e){var o=document.querySelector("#displayPrincipal");o&&(o.src=`${this.urlToGetImages}/${e}`)}hydrateFields(e){e.productTitle&&this.titleControl.setValue(e.productTitle),e.productStock&&this.stockControl.setValue(e.productStock),e.productWeight&&this.weightControl.setValue(e.productWeight),e.productMainImage&&this.hydrateImages(e.productMainImage),e.productPrice&&this.priceControl.setValue(e.productPrice),e.productDescription&&this.descriptionControl.setValue(e.productDescription),e.productFeatures&&(this.attributsProduct=JSON.parse(e.productFeatures)),e.CategoryId&&this.categoriesService.getCategoryById(e.CategoryId).then(o=>{null!=o.categoryParentId?(this.subCategoryControl.setValue(o),this.categoriesService.getCategoryById(o.categoryParentId).then(r=>{this.mainCategoryControl.setValue(r)})):this.mainCategoryControl.setValue(o)})}stepUp(){25===this.stepPercent&&!this.isOnDraftMode&&(this.updateProductObject(),this.saveProduct()),this.stepPercent<100&&(this.stepPercent+=25,this.changeProgressbarWidth())}stepDown(){this.stepPercent>25&&(this.stepPercent-=25,this.changeProgressbarWidth())}changeProgressbarWidth(){let e=document.querySelector(".progress-bar");e&&(e.style.width=`${this.stepPercent}%`)}displayAndUploadMainFile(e){let o=document.querySelector("#displayPrincipal");if(e.target.files){var r=new FileReader;r.readAsDataURL(e.target.files[0]),r.onload=c=>{o&&(o.src=c.target.result)},this.uploadFile(e.target.files[0],!0)}}displayAndUploadFile(e,o){let r=document.querySelector(`#displayOther${o}`);if(e.target.files){var c=new FileReader;c.readAsDataURL(e.target.files[0]),c.onload=g=>{r&&(r.src=g.target.result)},this.uploadFile(e.target.files[0],!1)}}uploadFile(e,o){const r=`${f.N.BACKEND_API_URL}/image/upload?product=${this.productObject.id}&mainImage=${o}`,c=new XMLHttpRequest,g=new FormData;c.open("POST",r,!0),c.onreadystatechange=()=>{4===c.readyState&&200===c.status&&"uploaded successfully"===JSON.parse(c.responseText).message&&this.toastService.show({body:"Image enregistr\xe9e !",isSuccess:!0})},g.append("folder","products"),g.append("images",e),c.send(g)}updateProductObject(){this.titleControl.value&&(this.productObject.productTitle=this.titleControl.value),this.weightControl.value&&(this.productObject.productWeight=parseInt(this.weightControl.value)),this.stockControl.value&&(this.productObject.productStock=parseInt(this.stockControl.value)),this.descriptionControl.value&&(this.productObject.productDescription=this.descriptionControl.value),this.priceControl.value&&(this.productObject.productPrice=parseInt(this.priceControl.value)),this.mainCategoryControl.value&&(this.productObject.productCategory=this.mainCategoryControl.value),this.subCategoryControl.value&&(this.productObject.productCategory=this.subCategoryControl.value),this.attributsProduct.length>0&&""!==this.attributsProduct[0].key&&""!==this.attributsProduct[0].value&&(this.productObject.productFeatures=JSON.stringify(this.attributsProduct))}saveProduct(){this.produitService.createProduct(this.productObject,this.productOwnerId).then(e=>{this.toastService.show({body:"L'annonce est enregistr\xe9 dans vos brouillons.",isSuccess:!0}),e&&(this.productObject=e)}).catch(e=>{this.toastService.show({body:"Une erreur s'est produite lors de la cr\xe9ation du produit ! Veuillez r\xe9essayer plus tard."})})}addNewAttribut(){this.attributsProduct.push({key:"",value:""})}removeAttribut(e){this.attributsProduct.splice(e,1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.o),t.Y36(L.k),t.Y36(w.I),t.Y36(_.G),t.Y36(C.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-product"]],decls:166,vars:36,consts:[[1,"manage-section"],[1,"container"],[1,"row"],[1,"col","col-3","d-none","d-xl-block"],["activePath","publish-announce"],[1,"col","col-xl-9"],[1,"create-product"],[4,"ngIf"],["role","progressbar","aria-label","Basic example","aria-valuenow","50","aria-valuemin","0","aria-valuemax","100",1,"progress"],[1,"progress-bar","progress-bar-striped","progress-bar-animated",2,"width","25%"],[1,"row","g-4","mt-3"],[1,"col","col-xl-6",3,"hidden"],[1,"col","details-part"],[1,"h-100"],[1,"fa-solid","fa-1","step-number"],[1,"mt-3"],["appearance","outline",1,"w-100"],["matInput","",3,"formControl"],["matInput","","type","number",3,"formControl"],[1,"row","row-cols-2"],[1,"col"],[1,"fa-solid","fa-2","step-number"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"w-100",3,"hidden"],[1,"fa-solid","fa-3","step-number"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"btn","btn-outline-dark","btn-sm",3,"click"],["class","input-group attr-group",4,"ngFor","ngForOf"],[1,"col","col-xl-6","col-12",3,"hidden"],[1,"images-part"],["id","input-files","enctype","multipart/form-data","method","post",1,"input-files"],[1,"principal","position-relative"],["for","principal"],["alt","image principale du produit","id","displayPrincipal","src","assets/images/products/product-placeholder.png","crossorigin","anonymous",1,"img-thumbnail","w-100"],["type","file","name","images","id","principal","accept","image/*","name","images",1,"d-none",3,"change"],["mat-mini-fab","","matTooltip","Supprimer",1,"position-absolute","rm-img-btn"],[1,"others","row","row-cols-3","g-2","mt-1"],["class","other col position-relative",4,"ngFor","ngForOf"],[1,"fa-solid","fa-4","step-number"],[1,"images-advices"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"fa-solid","fa-image"],[1,"fa-solid","fa-camera"],[1,"fa-solid","fa-images"],[1,"fa-solid","fa-sd-card"],[1,"fa-solid","fa-file-image"],[1,"fa-solid","fa-cube"],[1,"fa-solid","fa-5","step-number"],[1,"row","mt-2"],[1,"visibility-card",3,"ngClass","click"],[1,"fa-lg","fa-solid","fa-circle-check","position-absolute"],[1,"mt-3","d-flex","justify-content-start","align-items-center"],[1,"btn","step-down-btn",2,"margin-right","10px",3,"ngClass","click"],[1,"btn","btn-dark",3,"hidden","ngClass","click"],[1,"btn","btn-dark",3,"hidden","click"],[3,"value"],[1,"input-group","attr-group"],[1,"remove-btn","position-absolute","btn","btn-sm","btn-outline-danger",3,"click"],["placeholder","Ex : Couleur","type","text","maxlength","20",1,"form-control",2,"border-top-left-radius","5px","border-bottom-left-radius","5px",3,"ngModel","ngModelChange"],["placeholder","Rouge","type","text","maxlength","20",1,"form-control",3,"ngModel","ngModelChange"],[1,"other","col","position-relative"],[3,"for"],["alt","image principale du produit","src","assets/images/products/product-placeholder.png","crossorigin","anonymous",1,"img-thumbnail","w-100",3,"id"],["type","file","name","images","accept","image/*",1,"d-none",3,"id","change"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"app-manage-aside",4),t.qZA(),t.TgZ(5,"div",5)(6,"main",6)(7,"div",1),t.YNc(8,K,2,0,"h1",7),t.YNc(9,z,2,0,"h1",7),t.TgZ(10,"div",8),t._UZ(11,"div",9),t.qZA(),t.TgZ(12,"div",10)(13,"div",11)(14,"mat-card")(15,"mat-card-content")(16,"div",12)(17,"div",13)(18,"h2"),t._UZ(19,"i",14),t.TgZ(20,"span"),t._uU(21,"D\xe9tails du produit"),t.qZA()(),t.TgZ(22,"p"),t._uU(23,"Remplissez toutes les informations n\xe9cessaires."),t.qZA(),t.TgZ(24,"div",15)(25,"mat-form-field",16)(26,"mat-label"),t._uU(27,"Titre du produit"),t.qZA(),t._UZ(28,"input",17),t.qZA(),t.TgZ(29,"mat-form-field",16)(30,"mat-label"),t._uU(31,"Prix (\u20ac)"),t.qZA(),t._UZ(32,"input",18),t.qZA(),t.TgZ(33,"div",19)(34,"div",20)(35,"mat-form-field",16)(36,"mat-label"),t._uU(37,"Poids (KG)"),t.qZA(),t._UZ(38,"input",18),t.qZA()(),t.TgZ(39,"div",20)(40,"mat-form-field",16)(41,"mat-label"),t._uU(42,"N\xb0 en stock"),t.qZA(),t._UZ(43,"input",18),t.qZA()()(),t.TgZ(44,"mat-form-field",16)(45,"mat-label"),t._uU(46,"Description du produit"),t.qZA(),t._UZ(47,"textarea",17),t.qZA()()()()()()(),t.TgZ(48,"div",11)(49,"mat-card")(50,"mat-card-content")(51,"h2"),t._UZ(52,"i",21),t.TgZ(53,"span"),t._uU(54,"Choisissez une cat\xe9gorie"),t.qZA()(),t.TgZ(55,"p"),t._uU(56,"Choisissez une cat\xe9gorie \xe0 ce produit."),t.qZA(),t.TgZ(57,"div",15)(58,"mat-form-field",16)(59,"mat-label"),t._uU(60,"Cat\xe9gorie principale"),t.qZA(),t.TgZ(61,"mat-select",22),t.YNc(62,$,2,2,"mat-option",23),t.qZA()(),t.TgZ(63,"mat-form-field",24)(64,"mat-label"),t._uU(65,"Sous-cat\xe9gorie"),t.qZA(),t.TgZ(66,"mat-select",22),t.YNc(67,B,2,2,"mat-option",23),t.qZA()()()()(),t.TgZ(68,"mat-card",15)(69,"mat-card-content")(70,"h2"),t._UZ(71,"i",25),t.TgZ(72,"span"),t._uU(73,"Attributs du produit"),t.qZA()(),t.TgZ(74,"div",26)(75,"p"),t._uU(76,"Ajoutez des d\xe9tails \xe0 ce produit. (optionnel)"),t.qZA(),t.TgZ(77,"button",27),t.NdJ("click",function(){return o.addNewAttribut()}),t._uU(78," Ajouter "),t.qZA()(),t.YNc(79,j,5,2,"div",28),t.qZA()()(),t.TgZ(80,"div",29)(81,"mat-card")(82,"mat-card-content")(83,"div",30)(84,"div",13)(85,"h2"),t._UZ(86,"i",25),t.TgZ(87,"span"),t._uU(88,"T\xe9l\xe9verser des images de votre annonces"),t.qZA()(),t.TgZ(89,"p"),t._uU(90," Une annonce avec des images de qualit\xe9 obtient plus de visibilit\xe9, augmente vos chances de vendre plus rapidement."),t._UZ(91,"br"),t.qZA(),t.TgZ(92,"form",31)(93,"div",32)(94,"label",33),t._UZ(95,"img",34),t.qZA(),t.TgZ(96,"input",35),t.NdJ("change",function(c){return o.displayAndUploadMainFile(c)}),t.qZA(),t.TgZ(97,"button",36)(98,"mat-icon"),t._uU(99,"close"),t.qZA()()(),t.TgZ(100,"div",37),t.YNc(101,G,7,3,"div",38),t.qZA()()()()()()(),t.TgZ(102,"div",29)(103,"mat-card")(104,"mat-card-content")(105,"div",13)(106,"h2"),t._UZ(107,"i",39),t.TgZ(108,"span"),t._uU(109,"Quelques astuces"),t.qZA()(),t.TgZ(110,"div",40)(111,"ul",41)(112,"li",42),t._UZ(113,"i",43),t.TgZ(114,"span"),t._uU(115," La premi\xe8re image import\xe9e sera l'image principale du produit."),t.qZA()(),t.TgZ(116,"li",42),t._UZ(117,"i",44),t.TgZ(118,"span"),t._uU(119," Privil\xe9giez les images sous fond blanc."),t.qZA()(),t.TgZ(120,"li",42),t._UZ(121,"i",45),t.TgZ(122,"span"),t._uU(123," Les types de fichiers pris en charge sont .jpeg, .jpg, .png"),t.qZA()(),t.TgZ(124,"li",42),t._UZ(125,"i",46),t.TgZ(126,"span"),t._uU(127,"La taille max d'une image autoris\xe9e est 10MB. (Max 10 images)"),t.qZA()(),t.TgZ(128,"li",42),t._UZ(129,"i",47),t.TgZ(130,"span"),t._uU(131," Les produits avec photos se vendent plus rapidement."),t.qZA()(),t.TgZ(132,"li",42),t._UZ(133,"i",48),t.TgZ(134,"span"),t._uU(135," Choisissez des photos avec plusieurs angles."),t.qZA()()()()()()()(),t.TgZ(136,"div",11)(137,"mat-card")(138,"mat-card-content")(139,"h2"),t._UZ(140,"i",49),t.TgZ(141,"span"),t._uU(142,"Options de visibilit\xe9"),t.qZA()(),t.TgZ(143,"div",50)(144,"div",20)(145,"mat-card",51),t.NdJ("click",function(){return o.setVisibility(1)}),t.TgZ(146,"mat-card-content"),t._uU(147," Par d\xe9faut "),t._UZ(148,"i",52),t.qZA()()(),t.TgZ(149,"div",20)(150,"mat-card",51),t.NdJ("click",function(){return o.setVisibility(2)}),t.TgZ(151,"mat-card-content"),t._uU(152," Offre 1 "),t._UZ(153,"i",52),t.qZA()()(),t.TgZ(154,"div",20)(155,"mat-card",51),t.NdJ("click",function(){return o.setVisibility(3)}),t.TgZ(156,"mat-card-content"),t._uU(157," Offre 2 "),t._UZ(158,"i",52),t.qZA()()()()()()()(),t.TgZ(159,"div",53)(160,"button",54),t.NdJ("click",function(){return o.stepDown()}),t._uU(161," Pr\xe9c\xe9dent "),t.qZA(),t.TgZ(162,"button",55),t.NdJ("click",function(){return o.stepUp()}),t._uU(163," Suivant "),t.qZA(),t.TgZ(164,"button",56),t.NdJ("click",function(){return o.saveProduct()}),t._uU(165," Publier l'annonce "),t.qZA()()()()()()()()),2&e&&(t.xp6(8),t.Q6J("ngIf",o.isOnDraftMode),t.xp6(1),t.Q6J("ngIf",!o.isOnDraftMode),t.xp6(4),t.Q6J("hidden",25!==o.stepPercent),t.xp6(15),t.Q6J("formControl",o.titleControl),t.xp6(4),t.Q6J("formControl",o.priceControl),t.xp6(6),t.Q6J("formControl",o.weightControl),t.xp6(5),t.Q6J("formControl",o.stockControl),t.xp6(4),t.Q6J("formControl",o.descriptionControl),t.xp6(1),t.Q6J("hidden",25!==o.stepPercent),t.xp6(13),t.Q6J("formControl",o.mainCategoryControl),t.xp6(1),t.Q6J("ngForOf",o.mainProductsCategories),t.xp6(1),t.Q6J("hidden",0===o.subCategories.length),t.xp6(3),t.Q6J("formControl",o.subCategoryControl),t.xp6(1),t.Q6J("ngForOf",o.subCategories),t.xp6(12),t.Q6J("ngForOf",o.attributsProduct),t.xp6(1),t.Q6J("hidden",50!==o.stepPercent),t.xp6(21),t.Q6J("ngForOf",o.otherImages),t.xp6(1),t.Q6J("hidden",50!==o.stepPercent),t.xp6(34),t.Q6J("hidden",75!==o.stepPercent),t.xp6(9),t.Q6J("ngClass",t.VKq(26,A,1===o.selectedVisibility)),t.xp6(5),t.Q6J("ngClass",t.VKq(28,A,2===o.selectedVisibility)),t.xp6(5),t.Q6J("ngClass",t.VKq(30,A,3===o.selectedVisibility)),t.xp6(5),t.Q6J("ngClass",t.VKq(32,k,25===o.stepPercent)),t.xp6(2),t.Q6J("hidden",100===o.stepPercent)("ngClass",t.VKq(34,k,o.titleControl.invalid||o.priceControl.invalid||o.weightControl.invalid||o.stockControl.invalid||o.descriptionControl.invalid||o.mainCategoryControl.invalid)),t.xp6(2),t.Q6J("hidden",100!==o.stepPercent))},dependencies:[n.mk,n.sg,n.O5,I.a8,I.dn,v.nh,O.gM,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.nD,l.oH,l.On,l.F,E.KE,E.hX,Y.Nt,D.Hw,R.ey,V.gD,J.f],styles:["[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]{padding:20px 0;background-color:var(--gray-400)}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   .visibility-card[_ngcontent-%COMP%]{cursor:pointer;min-height:100px;transition:all ease-in-out .3s}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   .visibility-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   .visibility-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .position-absolute[_ngcontent-%COMP%]{display:none;top:15px;right:15px}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   mat-card.selected-visibility[_ngcontent-%COMP%]{box-shadow:#32325d40 0 13px 27px -5px,#0000004d 0 8px 16px -8px}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   mat-card.selected-visibility[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .position-absolute[_ngcontent-%COMP%]{display:block;color:var(--green-400)}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .main-row[_ngcontent-%COMP%]{min-height:300px}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attr-group[_ngcontent-%COMP%]{position:relative;margin-bottom:15px}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attr-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:54px}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attr-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none;border:1.5px solid var(--black)}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attr-group[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{right:4px;top:4px;scale:.9;border-radius:5px!important}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:var(--green-400);color:var(--white);border-radius:50%;width:30px;aspect-ratio:1;margin-right:10px}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{color:var(--red);margin-right:7px}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   .step-down-btn[_ngcontent-%COMP%]{background-color:var(--red);color:var(--white)}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:.75;pointer-events:none}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   .input-files[_ngcontent-%COMP%]{margin:0 auto}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   .input-files[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer;aspect-ratio:1;object-fit:cover}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   .input-files[_ngcontent-%COMP%]   .rm-img-btn[_ngcontent-%COMP%]{top:8px;right:10px;scale:.8;background-color:var(--green-400)}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Jost,sans-serif;font-size:26px;font-weight:600}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background-color:var(--green-400)}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin:0}[_nghost-%COMP%]   .create-product[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--gray-600);font-size:14px}"]}),i})();var U=s(8255);function W(i,a){if(1&i&&(t.TgZ(0,"span",12),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij("",e.myProducts.length," annonce(s) trouv\xe9e(s)")}}function X(i,a){1&i&&(t.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16),t._UZ(4,"img",17),t.TgZ(5,"span",18),t._uU(6,"Pas d'annonces ! "),t.TgZ(7,"a",19),t._uU(8,"Cliquez-ici"),t.qZA(),t._uU(9," pour cr\xe9e une annonce"),t.qZA()()()()())}function tt(i,a){1&i&&(t.TgZ(0,"span",38),t._uU(1,"En ligne"),t.qZA())}function et(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1,"Brouillon"),t.qZA())}function nt(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1,"En attente de validation"),t.qZA())}function ot(i,a){1&i&&(t.TgZ(0,"span",41),t._uU(1,"Annonce r\xe9voqu\xe9e"),t.qZA())}function it(i,a){if(1&i&&t._UZ(0,"img",42),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.s9C("src",o.imageBaseUrl+e.productMainImage,t.LSH)}}function rt(i,a){1&i&&t._UZ(0,"img",43)}function at(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",22)(1,"div",13)(2,"div",23)(3,"div",24),t.YNc(4,tt,2,0,"span",25),t.YNc(5,et,2,0,"span",26),t.YNc(6,nt,2,0,"span",27),t.YNc(7,ot,2,0,"span",28),t.qZA(),t.YNc(8,it,1,1,"img",29),t.YNc(9,rt,1,0,"img",30),t.TgZ(10,"div",31)(11,"p",32),t._uU(12),t.qZA(),t.TgZ(13,"div",33)(14,"button",34),t._UZ(15,"i",35),t.qZA(),t.TgZ(16,"mat-menu",null,36)(18,"button",37),t.NdJ("click",function(){const c=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.displayProduct(c))}),t._uU(19,"Aper\xe7u de l'annonce"),t.qZA(),t.TgZ(20,"button",37),t.NdJ("click",function(){const c=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.editProduct(c))}),t._uU(21,"Modifier l'annonce"),t.qZA(),t.TgZ(22,"button",37),t.NdJ("click",function(){const c=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.deleteProduct(c))}),t._uU(23,"Supprimer l'annonce"),t.qZA()()()()()()()}if(2&i){const e=a.$implicit,o=t.MAs(17),r=t.oxw(2);t.xp6(2),t.Jzz("background-image: url(",r.imageThumbnailUrl+e.productMainImage,");"),t.xp6(2),t.Q6J("ngIf","ONLINE"===e.productState),t.xp6(1),t.Q6J("ngIf","DRAFT"===e.productState),t.xp6(1),t.Q6J("ngIf","AWAITING"===e.productState),t.xp6(1),t.Q6J("ngIf","REVOKED"===e.productState),t.xp6(1),t.Q6J("ngIf",e.productMainImage),t.xp6(1),t.Q6J("ngIf",!e.productMainImage),t.xp6(3),t.Oqu(e.productTitle),t.xp6(2),t.Q6J("matMenuTriggerFor",o)}}function st(i,a){if(1&i&&(t.TgZ(0,"div",20),t.YNc(1,at,24,11,"div",21),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.myProducts)}}let ct=(()=>{class i{constructor(e,o,r){this.produitsService=e,this.securityService=o,this.router=r,this.imageBaseUrl=`${f.N.BACKEND_IMAGES_FOLDER}/products/`,this.imageThumbnailUrl=`${f.N.BACKEND_IMAGES_FOLDER}/thumbnails/thumb`,this.securityService.getAuthenticatedUser().then(c=>{this.seller=c,this.seller.id&&this.produitsService.getSellerProducts(this.seller.id).then(g=>{this.myProducts=g})})}editProduct(e){this.router.navigateByUrl(`/produits/nouvelle-annonce?edit_product=${e.productSlug}`)}displayProduct(e){this.router.navigate([`/produit/${e.productSlug}`])}deleteProduct(e){alert(e.productTitle)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.o),t.Y36(w.I),t.Y36(C.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-my-products"]],decls:14,vars:3,consts:[[1,"manage-section"],[1,"container"],[1,"row"],[1,"col","col-3","d-none","d-xl-block"],["activePath","manage-announces"],[1,"col","col-xl-9"],[1,"h-100","p-3"],[1,"d-flex","align-items-center","justify-content-between"],["class","count-label",4,"ngIf"],[1,"title-divider"],["class","card",4,"ngIf"],["class","my-products row row-cols-xl-4 g-xl-4 row-cols-2 g-3",4,"ngIf"],[1,"count-label"],[1,"card"],[1,"card-content"],[1,"container","pt-5"],[1,"d-flex","flex-column","align-items-center","justify-content-center"],["src","assets/images/empty.svg","alt","Pas encore de produits","loading","lazy",1,"empty-img"],[1,"mt-5","alert","alert-danger"],["routerLink","/produits/nouvelle-annonce"],[1,"my-products","row","row-cols-xl-4","g-xl-4","row-cols-2","g-3"],["class","col single-prod",4,"ngFor","ngForOf"],[1,"col","single-prod"],[1,"position-relative","card-body"],[1,"position-absolute"],["class","badge text-bg-success m-1",4,"ngIf"],["class","badge text-bg-info m-1",4,"ngIf"],["class","badge text-bg-warning m-1",4,"ngIf"],["class","badge text-bg-danger m-1",4,"ngIf"],["alt","produit","loading","lazy","crossorigin","anonymous",3,"src",4,"ngIf"],["src","assets/images/products/product-placeholder.png","alt","produit","loading","lazy","crossorigin","anonymous",4,"ngIf"],[1,"infos"],[1,"text-ellip","label-prod"],[1,"menu"],["type","button",1,"menu-btn",3,"matMenuTriggerFor"],[1,"fa-solid","fa-bars"],["actions","matMenu"],["mat-menu-item","",3,"click"],[1,"badge","text-bg-success","m-1"],[1,"badge","text-bg-info","m-1"],[1,"badge","text-bg-warning","m-1"],[1,"badge","text-bg-danger","m-1"],["alt","produit","loading","lazy","crossorigin","anonymous",3,"src"],["src","assets/images/products/product-placeholder.png","alt","produit","loading","lazy","crossorigin","anonymous"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"app-manage-aside",4),t.qZA(),t.TgZ(5,"div",5)(6,"main",6)(7,"div",7)(8,"h1"),t._uU(9,"Mes annonces"),t.qZA(),t.YNc(10,W,2,1,"span",8),t.qZA(),t._UZ(11,"div",9),t.YNc(12,X,10,0,"div",10),t.YNc(13,st,2,1,"div",11),t.qZA()()()()()),2&e&&(t.xp6(10),t.Q6J("ngIf",o.myProducts),t.xp6(2),t.Q6J("ngIf",!o.myProducts||0===o.myProducts.length),t.xp6(1),t.Q6J("ngIf",o.myProducts&&o.myProducts.length>0))},dependencies:[n.sg,n.O5,U.VK,U.OP,U.p6,J.f,C.rH],styles:["[_nghost-%COMP%]   .count-label[_ngcontent-%COMP%]{color:var(--gray-600)}[_nghost-%COMP%]   .empty-img[_ngcontent-%COMP%]{max-width:300px;width:80%}[_nghost-%COMP%]   .my-products[_ngcontent-%COMP%]   .single-prod[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:cover;min-height:200px;padding:0;position:relative!important}[_nghost-%COMP%]   .my-products[_ngcontent-%COMP%]   .single-prod[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]{position:absolute!important;bottom:0;left:0;height:40px;background:var(--white);opacity:.94;width:100%;display:flex;align-items:center;justify-content:space-between;padding:0 8px}[_nghost-%COMP%]   .my-products[_ngcontent-%COMP%]   .single-prod[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .label-prod[_ngcontent-%COMP%]{margin-top:8px;font-size:16px}[_nghost-%COMP%]   .my-products[_ngcontent-%COMP%]   .single-prod[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{right:5px}[_nghost-%COMP%]   .my-products[_ngcontent-%COMP%]   .single-prod[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--green-400)!important;width:30px;aspect-ratio:1;color:var(--white);display:flex;align-items:center;justify-content:center;border:none;border-radius:4px;transition:scale ease-in-out .3s}[_nghost-%COMP%]   .my-products[_ngcontent-%COMP%]   .single-prod[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{scale:1.1}[_nghost-%COMP%]   .my-products[_ngcontent-%COMP%]   .single-prod[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .my-products[_ngcontent-%COMP%]   .single-prod[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;object-fit:cover;border-radius:4px}"]}),i})();var N=s(6186);const lt=[{path:"",component:q,title:"Nos annonces | Akawor"},{path:"nouvelle-annonce",component:H,title:"Ajout d'un nouveau produit | Akawor",canActivate:[N.CP]},{path:"mes-annonces",component:ct,title:"Mes annonces | Akawor",canActivate:[N.CP]},{path:":slug",component:q}];let dt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[C.Bz.forChild(lt),C.Bz]}),i})();var gt=s(272);let ut=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[h.o],imports:[n.ez,gt.I,dt]}),i})()}}]);